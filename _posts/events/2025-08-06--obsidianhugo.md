> id: https://sspai.com/post/101376

> link: https://sspai.com/post/101376

> title: ObsidianHugo

# ObsidianHugo
_Published on Wed, 06 Aug 2025 03:31:20 GMT_

![Article Cover Image](https://cdnfile.sspai.com/2025/07/28/40019b62bdbedabab35ca9b7865e9adb.png)  

**Matrix é¦–é¡µæ¨è**Â 

[Matrix](https://sspai.com/matrix)Â æ˜¯å°‘æ•°æ´¾çš„å†™ä½œç¤¾åŒºï¼Œæˆ‘ä»¬ä¸»å¼ åˆ†äº«çœŸå®çš„äº§å“ä½“éªŒï¼Œæœ‰å®ç”¨ä»·å€¼çš„ç»éªŒä¸æ€è€ƒã€‚æˆ‘ä»¬ä¼šä¸å®šæœŸæŒ‘é€‰ Matrix æœ€ä¼˜è´¨çš„æ–‡ç« ï¼Œå±•ç¤ºæ¥è‡ªç”¨æˆ·çš„æœ€çœŸå®çš„ä½“éªŒå’Œè§‚ç‚¹ã€‚Â   
æ–‡ç« ä»£è¡¨ä½œè€…ä¸ªäººè§‚ç‚¹ï¼Œå°‘æ•°æ´¾ä»…å¯¹æ ‡é¢˜å’Œæ’ç‰ˆç•¥ä½œä¿®æ”¹ã€‚

* * *

Obsidian to Hugo å·¥ä½œæµ
--------------------

Hugo å…è®¸æˆ‘ä»¬ä½¿ç”¨ Markdown æ ¼å¼è¿›è¡Œå†™ä½œï¼Œå¹¶è‡ªåŠ¨è½¬æ¢ä¸ºé™æ€ç½‘ç«™ï¼ŒMarkdown ç¼–è¾‘å™¨å¯ä»¥è‡ªç”±åœ°é€‰æ‹©ã€‚æˆ‘ä½¿ç”¨çš„æ˜¯ Obsidian ç¼–è¾‘å™¨ï¼Œå°†`.md`æ–‡ä»¶åŒæ­¥è‡³ HomeServer åï¼Œåœ¨ Linux ç¯å¢ƒä¸­æ„å»ºå¹¶é¢„è§ˆç½‘ç«™ï¼Œæœ€ç»ˆ Push è‡³ Github å¹¶ç”± Cloudflare è§£æã€‚è¿™æ ·çš„å·¥ä½œæµå¹¶æ— å¯è¯´é“ä¹‹å¤„ï¼Œä½†æ˜¯å…¶ä¸­çš„é™„ä»¶ï¼ˆå›¾ç‰‡ã€è§†é¢‘ï¼‰çš„å¤„ç†æ˜¯æ¯”è¾ƒéº»çƒ¦çš„ï¼Œå¸¸è§„çš„å¤„ç†åŠæ³•æœ‰ï¼š

-   ä½¿ç”¨ Markdown é£æ ¼é“¾æ¥é™„ä»¶ï¼Œå¹¶éšé¡¹ç›®ä¸Šä¼ è‡³ Github ä»“åº“ï¼›
-   å†™ä½œæ—¶ä½¿ç”¨å›¾åºŠï¼ˆå›¾åºŠæœåŠ¡ã€OSS ç­‰ï¼‰æ‰˜ç®¡å›¾ç‰‡å¹¶åœ¨`.md`æ–‡ä»¶ä¸­ä»¥ Markdown é£æ ¼æ’å…¥é“¾æ¥ã€‚

ä¸ç®¡å“ªç§æ–¹æ³•ï¼Œåœ¨å†™ä½œæ—¶éƒ½æ˜¯ä¸å¤Ÿæµç•…çš„ï¼Œåœ¨å‰æœŸã€åæœŸè¿˜å¯èƒ½è¦å¤„ç†å›¾åƒçš„å‹ç¼©é—®é¢˜ï¼Œå½“ç„¶æˆ‘ä»¬å¯ä»¥å¼•å…¥ç¬¬ä¸‰æ–¹çš„å·¥å…·æ¯”å¦‚[WebP Cloud Services](https://webp.se/)ï¼Œä½†æœ‰æ‚–äºæˆ‘ç”¨ Cloudflare ä¸€æŠŠæ¢­å“ˆçš„ç†å¿µ1ï¼Œä¸”æ— æ³•è§£å†³ CF çš„ R2 å…è´¹å­˜å‚¨ç©ºé—´ï¼ˆ10GBï¼‰å¯èƒ½ä¸è¶³çš„é—®é¢˜ã€‚

ä¸ºäº†è®©`Obsidian - Hugo`çš„å†™ä½œã€å‘å¸ƒæµæ›´åŠ é¡ºç•…ï¼Œæˆ‘ä¹‹å‰ä½¿ç”¨è„šæœ¬åœ¨æœ¬åœ°ï¼ˆHomeServerï¼‰è½¬æ¢ Obsidian çš„ WiKi é“¾æ¥ï¼ˆåŒæ–¹æ‹¬å·ï¼‰å¹¶å‹ç¼©å›¾åƒè‡ªåŠ¨ä¸Šä¼ è‡³ CloudFlare R2ã€‚æœ‰ 24 å°æ—¶åœ¨çº¿çš„ HomeServer è¾…åŠ©ï¼Œè¿™å¥—æµç¨‹å…è®¸æˆ‘åœ¨å…¨å¹³å°åŒæ­¥å†™ä½œã€æ’å…¥é™„ä»¶ï¼Œè¶³å¤Ÿæµç•…ã€‚ä½†ä½¿ç”¨è¿‡ç¨‹ä¸­å‘ç°ï¼Œå›ºå®šçš„å‹ç¼©è®¾ç½®ä½¿å¾—ä¸€äº›ç…§ç‰‡è´¨é‡æœ‰æ˜æ˜¾çš„ä¸‹é™ï¼Œè€Œå¯¹äºä¸€äº›ç”»é¢ç®€å•çš„å›¾ç‰‡ï¼Œä½“ç§¯ä¼¼ä¹è¿˜æœ‰å‹ç¼©çš„ç©ºé—´ã€‚

å› æ­¤ï¼Œ`Obsidian - Hugo`è‡ªåŠ¨åŒ–å‘å¸ƒçš„æ ¸å¿ƒåœ¨äºè§£å†³å¤šåª’ä½“é™„ä»¶ï¼ˆä¸»è¦æ˜¯å›¾ç‰‡ï¼‰é—®é¢˜ï¼Œå³è‡ªåŠ¨è½¬æ¢é™„ä»¶é“¾æ¥ã€è‡ªåŠ¨ä¼˜åŒ–å›¾ç‰‡ä½“ç§¯ä¸è´¨é‡ã€è‡ªåŠ¨ä¸Šä¼  OSSã€‚

![](https://cdnfile.sspai.com/2025/07/27/0e692f352b2eaea4376e5979fcc09fb2.png?imageView2/2/w/1120/q/90/interlace/1/ignore-error/1/format/webp)

> å›¾åƒä¼˜åŒ–æ—¢æ˜¯ä¸€é—¨è‰ºæœ¯ï¼Œä¹Ÿæ˜¯ä¸€é—¨ç§‘å­¦ï¼šè¯´å®ƒæ˜¯ä¸€é—¨è‰ºæœ¯ï¼Œæ˜¯å› ä¸ºå•ä¸ªå›¾åƒçš„å‹ç¼©å¹¶ä¸å­˜åœ¨æ˜ç¡®çš„æœ€ä½³æ–¹æ¡ˆï¼Œè¯´å®ƒæ˜¯ä¸€é—¨ç§‘å­¦ï¼Œåˆ™æ˜¯å› ä¸ºæœ‰è®¸å¤šå‘å±•æˆç†Ÿçš„æ–¹æ³•å’Œç®—æ³•éƒ½èƒ½å¤Ÿæ˜¾è‘—ç¼©å‡å›¾åƒçš„å¤§å°ã€‚æ‰¾åˆ°å›¾åƒçš„æœ€ä½³è®¾ç½®éœ€è¦åœ¨è®¸å¤šæ–¹é¢è¿›è¡Œè®¤çœŸåˆ†æï¼šæ ¼å¼èƒ½åŠ›ã€ç¼–ç æ•°æ®çš„å†…å®¹ã€è´¨é‡ã€åƒç´ å°ºå¯¸ç­‰ã€‚
> 
> â€”â€” Google Web Fundamentals

å›¾åƒå°ºå¯¸çš„ç¡®å®š
-------

é¦–å…ˆè¦ç¡®å®šç›®æ ‡å°ºå¯¸å®½é«˜ï¼Œé«˜æ¸…åŸå›¾è¶…å¤§çš„å°ºå¯¸å¯¹äº Web æµè§ˆæ¥è¯´æ˜¯æ— æ„ä¹‰çš„2ï¼Œæµè§ˆå™¨ä¼šæ ¹æ® css æ ·å¼å’Œè®¾å¤‡å±å¹•è‡ªåŠ¨ç¼©æ”¾å›¾åƒï¼Œä¸å…¶è®©æµè§ˆå™¨å¯¹å›¾åƒé™é‡‡æ ·ï¼Œä¸å¦‚åœ¨æœåŠ¡ç«¯å®Œæˆï¼Œå¦‚æ­¤å¯ä»¥æœ‰æ•ˆå‡å°å­˜å‚¨ä½“ç§¯å¹¶æé«˜ç½‘ç«™åŠ è½½é€Ÿåº¦ã€‚

åº”å¯¹å¤šè®¾å¤‡çš„æœ€ä½³ç”»è´¨å›¾ç‰‡é—®é¢˜ï¼Œå¯ä»¥é€šè¿‡ä¼˜åŒ–å•å¼ å›¾ç‰‡ï¼Œæˆ–è€…å‡†å¤‡æ•°å¼ ä¸åŒå°ºå¯¸çš„å›¾ç‰‡å¹¶æ ¹æ®è®¾å¤‡è‡ªåŠ¨é€‰æ‹©ã€‚ä¸ºäº†åœ¨æœ‰é™å®¹é‡çš„ R2 å­˜å‚¨æ¡¶ä¸­å°½å¯èƒ½å¤šåœ°å­˜å‚¨æ–‡ä»¶ï¼Œæˆ‘ä»¬è¿˜æ˜¯é‡‡ç”¨ä¼˜åŒ–å•å¼ å›¾ç‰‡çš„è·¯çº¿ã€‚å› æ­¤é¦–å…ˆè¦ç¡®å®šå›¾ç‰‡çš„å®½é«˜å°ºå¯¸åº”è¯¥è®¾ç½®ä¸ºå¤šå¤§ã€‚

### å›¾åƒå…ƒç´ 

æ ¹æ® hugo-book çš„æ ·å¼æºç ï¼š

```
// /themes/hugo-book/assets/_defaults.scss
$font-size-base: 16px !default;
$font-size-16: 1rem !default;
$body-min-width: 20rem !default;
$container-max-width: 80rem !default;
$menu-width: 16rem !default;
$toc-width: 16rem !default;
```

`1rem`å¯¹åº”`16px`ï¼Œå› æ­¤æœ‰æ•ˆç”»å¸ƒçš„æœ€å¤§å°ºå¯¸ä¸º`80*16px=1280px`ï¼Œå…¶ä¸­èœå•`menu`å’Œæ ‡ç­¾`toc`çš„ç»„ä»¶å®½åº¦å›ºå®šä¸º`16rem`ï¼Œå¯¹äºæ¨ªå‘åˆ†è¾¨ç‡å¤§äº`1280px`çš„æµè§ˆå™¨ï¼Œä¸¤è¾¹è‡ªåŠ¨ç•™ç©ºã€‚åœ¨ç½‘ç«™çš„`æ­£æ–‡`åŒºåŸŸï¼Œæœ€å¤§æ¨ªå‘æ˜¾ç¤ºå°ºå¯¸ä¸º`(80-16-16)*16px=768px`ï¼Œç”±æ­¤æˆ‘ä»¬åˆæ­¥ç¡®å®š`æ­£æ–‡`æ’å›¾çš„æœ€å¤§çš„æ¨ªå‘å°ºå¯¸ä¸º`768px`ï¼Œå…¶å®ƒå®¹å™¨ä¸­çš„å›¾åƒå°ºå¯¸ä¹Ÿå¯ä»¥åœ¨ css æ ·å¼ä¸­æŸ¥åˆ°ï¼Œæˆ–è€…ç›´æ¥é€šè¿‡æµè§ˆå™¨`å¼€å‘è€…æ¨¡å¼`(`ctrl+shift+c`)å¹¶ç”¨æ ·å¼æ‹¾å–å™¨æŸ¥çœ‹ã€‚

![](https://cdnfile.sspai.com/2025/07/27/675783932c16d45c038bdd66bdfb924b.png?imageView2/2/w/1120/q/90/interlace/1/ignore-error/1/format/webp)

å¯¹äºç§»åŠ¨ç«¯ï¼Œæˆ‘ä»¬åœ¨æµè§ˆå™¨`å¼€å‘è€…æ¨¡å¼`ä¸­æ¨¡æ‹Ÿç§»åŠ¨è®¾å¤‡ï¼ˆ`Device Toolbar`ï¼‰ï¼Œå¯ä»¥çœ‹åˆ°ä¸€äº›é¢„è®¾çš„è®¾å¤‡å°ºå¯¸ï¼Œæ¯”å¦‚`Samsung Galxy S20 Ultra`çš„å°ºå¯¸ä¸º`412*915px`ã€‚ç„¶è€Œï¼Œå¦‚æœæˆ‘ä»¬å°†å›¾åƒé™é‡‡æ ·ä¸º`412px`åƒç´ ï¼Œä¼šæ„Ÿåˆ°æ¨¡ç³Šä¸æ¸…ï¼Œ`412px`ä¹Ÿè¿œä½äºçœŸå®çš„å±å¹•åˆ†è¾¨ç‡ã€‚è¿™å’Œæµè§ˆå™¨æ¸²æŸ“ç½‘é¡µä½¿ç”¨çš„æ˜¯ã€ŒCSS åƒç´ ï¼ˆviewportï¼‰ã€è€Œéç‰©ç†åƒç´ æœ‰å…³ï¼Œä¾‹å¦‚ Galaxy S20 Ultra çš„ CSS åƒç´ ä¸º`412px*915px`ï¼Œç‰©ç†åƒç´ ä¸º`1080px*2400px`(FHD+æ¨¡å¼)ï¼Œæ¯”å€¼ Device Pixel Ratio (DPR)ä¸º 2.62ã€‚

### è®¾å¤‡ DPR

åœ¨åƒç´ å¯†åº¦è¾ƒé«˜çš„è®¾å¤‡ï¼ˆå¦‚ Retina æ˜¾ç¤ºå™¨ï¼‰ä¸Šï¼ŒDPR å¤§äº 1ï¼ˆä¾‹å¦‚ 2ã€3 ç”šè‡³æ›´é«˜ï¼‰ã€‚ è¿™æ„å‘³ç€å•ä¸ª CSS åƒç´ å°†ç”±å¤šä¸ªç‰©ç†åƒç´ è¡¨ç¤ºï¼Œä»è€Œäº§ç”Ÿæ›´æ¸…æ™°çš„å›¾åƒå’Œæ–‡æœ¬ã€‚ä»æœ¬è´¨ä¸Šè®²ï¼ŒDPR å…è®¸ Web å¼€å‘äººå‘˜ä½¿å†…å®¹é€‚åº”ä¸åŒçš„å±å¹•åˆ†è¾¨ç‡ï¼Œç¡®ä¿å›¾åƒå’Œæ–‡æœ¬åœ¨å„ç§è®¾å¤‡ä¸Šæ˜¾ç¤ºæ¸…æ™°ä¸”å¤§å°åˆé€‚ã€‚ä¾‹å¦‚åœ¨ hugo-book ä¸»é¢˜ä¸­ï¼Œé€šè¿‡å¸ƒå±€æ–­ç‚¹`$mobile-breakpoint`æ¥è¿›è¡Œç§»åŠ¨ç«¯é€‚é…ï¼Œ`$mobile-breakpoint`çš„é»˜è®¤å€¼ä¸º`56rem`å³`896px`ã€‚

```
$mobile-breakpoint: $menu-width + $body-min-width * 1.2 + $toc-width !default;
@media screen and (max-width: $mobile-breakpoint) {
  .book-menu {
    visibility: hidden;
    margin-inline-start: -$menu-width;
    z-index: 1;
  }
...
```

ä½†æ˜¯ï¼Œæˆ‘ä»¬ä»åº”å‡†å¤‡ç­‰äºæˆ–ç•¥é«˜äº`CSS åƒç´  * DPR`çš„å›¾åƒï¼Œè¿™æ ·æ‰èƒ½åœ¨é«˜æ¸…å±ï¼ˆé«˜ DPRï¼‰ä¸‹æ˜¾ç¤ºæ¸…æ™°ã€‚åœ¨ç§»åŠ¨ç«¯ï¼Œæˆ‘ä»¬ä¹Ÿå¯ä»¥ç®€å•åœ°ç›´æ¥å–ç‰©ç†åƒç´ ä¸ºå‚è€ƒå€¼ï¼ˆå³ä¸è€ƒè™‘è¾¹è·ï¼‰ã€‚

ç›®å‰ï¼Œç§»åŠ¨ç«¯çš„é«˜åˆ†å±å·²è¾¾`1440px`ï¼Œæˆ‘ä»¬å°±å–è¿™ä¸ªä½œä¸ºç§»åŠ¨ç«¯çš„å°ºå¯¸ä¸Šé™ã€‚åœ¨æ¡Œé¢ç«¯ï¼Œç”±äºé«˜åˆ†å±çš„æ™®åŠï¼ŒDPR ä¹Ÿéšç§»åŠ¨ç«¯ä¸€æ ·æ°´æ¶¨èˆ¹é«˜ï¼Œæ¯”å¦‚ 4k å±å’Œ iMac Retina å±å¹•ï¼Œè¿™ç±»å±å¹•çš„ DPR ä¸€èˆ¬å¯è¾¾ 2ã€‚å› æ­¤ï¼Œç»¼åˆç°æœ‰ç¡¬ä»¶å’Œ hugo-book æ¨¡æ¿çš„è®¾ç½®ï¼Œæˆ‘ä»¬åº”è¯¥å‡†å¤‡çš„æ’å›¾æ¨ªå‘å°ºå¯¸ä¸åº”å°äº`1440px`å’Œ`768*2=1536px`ã€‚æˆ‘ä»¬å°†åšå®¢ä¸­ä¸åŒç§ç±»çš„å›¾çš„æœ€å¤§å°ºå¯¸è®¡ç®—å‡ºæ¥ï¼Œä»¥æœ€ç»ˆçš„`ç»¼åˆå°ºå¯¸`ä¸ºç›®æ ‡åƒç´ å€¼ã€‚

å›¾åƒç±»å‹

CSS åƒç´ /px

ç§»åŠ¨ç«¯æœ€å¤§å°ºå¯¸/px

DPR(desktop)

ç»¼åˆå°ºå¯¸/px

banner

768

1440

2.0

1536

æ’å›¾

614

1440

2.0

1440

åŒæ æ’å›¾

332

720

2.0

720

å¡ç‰‡æ’å›¾

120

360

2.0

360

æ­£ç¡®åœ°æˆªå›¾
-----

ç›¸æœº/æ‰‹æœºæ‹æ‘„çš„å›¾åƒåˆ†è¾¨è¿œè¿œè¶…è¿‡å‚è€ƒåƒç´ å€¼ï¼Œæˆ‘ä»¬å¯¹å…¶è¿›è¡Œé™é‡‡æ ·å¤„ç†ã€‚ä½†å¦‚æœç½‘ç«™ä¸­æœ‰å¤§é‡çš„å±å¹•æˆªå›¾ï¼Œå…¶åŸå§‹å°ºå¯¸å¯èƒ½å°±æ¯”å‚è€ƒåƒç´ ä½äº†ï¼Œå½“ç„¶æˆ‘ä»¬å¯ä»¥å¯¹å…¶è¿›è¡Œè¶…é‡‡æ ·ï¼Œä½†è¿™ä»¶äº‹æ”¾åœ¨å‰æœŸåšæ•ˆæœä¼šæ›´å¥½ã€‚

åœ¨æµè§ˆå™¨ä¸­ï¼Œç›´æ¥é€šè¿‡`ctrl+é¼ æ ‡æ»šè½®`å¯¹çª—å£æ”¾å¤§ï¼ˆchrome æœ€å¤§å¯ä»¥è‡³ 500%ï¼‰ï¼Œå†å¯¹ç›®æ ‡è¿›è¡Œæˆªå›¾å°±å¯ä»¥å¾—åˆ°åˆ†è¾¨ç‡æ›´é«˜çš„å›¾äº†ã€‚æ¡Œé¢ç¯å¢ƒï¼ˆwin11ï¼‰ï¼Œå¯ä»¥é€šè¿‡`ç³»ç»Ÿ` - `å±å¹•` - `ç¼©æ”¾å’Œå¸ƒå±€` å¢åŠ ç¼©æ”¾æ¯”ä¾‹ï¼Œè®©å°å…ƒç´ æ”¾å¤§æ˜¾ç¤ºã€‚

ä»¥æˆªæœ¬ç«™ä¾§è¾¹æ çŠ¶æ€å›¾ä¸ºä¾‹ï¼Œè¯¥ç»„ä»¶çš„ CSS åƒç´ å®½åº¦ä¸º`224px`ï¼Œ2k/25 å¯¸å±çš„ç¼©æ”¾ç‡ä¸€èˆ¬ä¸º 150%ï¼Œè‹¥ç›´æ¥å±å¹•æˆªå›¾å¾—åˆ°çš„å›¾ç‰‡å®½åº¦ä¸º`336px`ï¼Œæ”¾åœ¨æ­£æ–‡ä¸­ï¼ˆ768px å®½åº¦ï¼‰æ˜¾ç„¶æ˜¯ä¸å¤Ÿçš„ï¼Œæˆ‘ä»¬ç›´æ¥å°†æµè§ˆå™¨æ”¾å¤§ 500%ï¼Œå°±å¯ä»¥æˆªåˆ°å®½åº¦è¿‘`1700px`çš„å›¾ï¼Œå¯¹æ¯”å¦‚ä¸‹ã€‚

![](https://cdnfile.sspai.com/2025/07/27/7be4c9028ce536db46d6b2cb96f536fc.png?imageView2/2/w/1120/q/90/interlace/1/ignore-error/1/format/webp)

é‡é‡‡æ ·ã€æ ¼å¼ã€è´¨é‡
---------

python çš„`Pillow`åº“å¯ä»¥å¿«é€Ÿå®ç°å›¾åƒç¼©æ”¾ã€å‹ç¼©å’Œä¿å­˜ã€‚å…¶é‡é‡‡æ ·é»˜è®¤ç®—æ³•ä¸º`BICUBIC`ï¼Œæˆ‘ä»¬å¯¹æ—¶é—´ä¸æ•æ„Ÿï¼Œå› æ­¤ç›´æ¥æ˜¾å¼æŒ‡å®šè´¨é‡æœ€é«˜çš„`LANCZOS`æ’å€¼3ã€‚

```
img = img.resize((w, h), resample=Image.Resampling.LANCZOS)
```

åœ¨ä¿å­˜æ—¶ï¼Œå¯ä»¥è¿›ä¸€æ­¥é€‰æ‹©æ ¼å¼ã€å‹ç¼©ç‡å’Œè´¨é‡ã€‚

```
img.save(output_path, format="WEBP", method=6, quality=quality)
```

æ˜¾å¼æŒ‡å®šé€Ÿåº¦æœ€æ…¢ä½†å‹ç¼©ç‡æœ€é«˜çš„`method=6`ï¼Œå°½å¯èƒ½åœ°é™ä½æ–‡ä»¶å¤§å°ã€‚

æ˜¾å¼æŒ‡å®šæ ¼å¼`format="WEBP"`ã€‚WebP æ”¯æŒæœ‰æŸå‹ç¼©ä¸æ— æŸå‹ç¼©ï¼Œä¸”æ”¯æŒåŠ¨å›¾å’Œ Alpha é€æ˜é€šé“ã€‚å¹³å‡è€Œè¨€ï¼ŒWebP çš„æ–‡ä»¶å¤§å°æ¯”åŒç±» JPEG å›¾åƒå‡å°‘äº† 30%ã€‚æ—¶è‡³ä»Šæ—¥ï¼Œ`Webp`æ ¼å¼å·²ç»å¾—åˆ°ç»å¤§å¤šæ•°æµè§ˆå™¨æ”¯æŒï¼ˆä»… IE ä¸æ”¯æŒï¼‰4ã€‚åšå®¢ç½‘ç«™å®Œå…¨å¯ä»¥ç»Ÿä¸€ä½¿ç”¨ Webp æ ¼å¼å›¾åƒã€‚

![](https://cdnfile.sspai.com/2025/07/27/3102f54a1d05edd94aec55aa294b3241.png?imageView2/2/w/1120/q/90/interlace/1/ignore-error/1/format/webp)

`quality`æå¤§åœ°å½±å“æ–‡ä»¶ä½“ç§¯å’Œè´¨é‡ï¼Œä¸€èˆ¬æ¥è¯´å–å€¼`60-80`å°±èƒ½å¹³è¡¡å¥½`è´¨é‡ - ä½“ç§¯`è¿™å¯¹çŸ›ç›¾ã€‚å¤§å¤šæ–‡ç« ä¹Ÿå°±ä»‹ç»åˆ°è¿™äº†ï¼Œä»¥ä¸€ä¸ªè¾ƒä¸ºæ™®é€‚ä½†å›ºå®šçš„å‚æ•°æ¥åº”å¯¹æ‰€æœ‰åœºæ™¯ã€‚ä½†æˆ‘åœ¨å®è·µä¸­å‘ç°ï¼Œå›ºå®šçš„`quality`å–å€¼ç»å¸¸é€ æˆå›¾åƒå‹ç¼©è¿‡åº¦æˆ–ä¸è¶³ï¼Œè€Œç”¨è‚‰çœ¼å»è¯„ä¼°å›¾åƒè´¨é‡æ˜¾ç„¶æ˜¯ä½æ•ˆçš„ã€‚

![](https://cdnfile.sspai.com/2025/07/27/f626595098d1eacc7465f1ec87759a01.png?imageView2/2/w/1120/q/90/interlace/1/ignore-error/1/format/webp)

å›¾åƒå‹ç¼©ä¸è´¨é‡è¯„ä»·
---------

### è¯„ä»·æŒ‡æ ‡

ä¸ºäº†åœ¨ä¿è¯è´¨é‡çš„åŒæ—¶ï¼Œæ ¹æ®æ¯å¼ å›¾ç‰‡çš„å…·ä½“æƒ…å†µæœ€å¤§åŒ–åœ°å‹ç¼©å›¾åƒä½“ç§¯ï¼Œè¦å¼•å…¥è¯„ä»·æ ‡å‡†ï¼Œä¸»è§‚åœ°æ¥è¯´ï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹å‡ ç‚¹ï¼Œä½†æ— æ³•é‡åŒ–å·®å¼‚ï¼š

-   æ˜¯å¦æ¨¡ç³Šã€å¤±çœŸï¼ˆå¦‚æ–‡å­—è¾¹ç¼˜é”¯é½¿ã€ç»†èŠ‚ä¸¢å¤±ï¼‰ï¼›
-   è‰²å½©æ˜¯å¦åå·®ã€å¯¹æ¯”åº¦æ˜¯å¦å¼‚å¸¸ï¼›
-   å‹ç¼©ä¼ªå½±ï¼ˆå¦‚é©¬èµ›å…‹ã€å—æ•ˆåº”ã€è‰²å¸¦ï¼‰ï¼›

å°è¯•ä½¿ç”¨ NeRF å¸¸ç”¨çš„è¯„ä»·æŒ‡æ ‡æ¥ååŠ©é‡åŒ–å·®å¼‚ã€‚

**æŒ‡æ ‡**

**å…¨ç§°**

**åŸç†**

**å«ä¹‰**

**ä¼˜ç‚¹**

**ç¼ºç‚¹**

**PSNR**

Peak Signal-to-Noise Ratio å³°å€¼ä¿¡å™ªæ¯”

åŸºäº MSEï¼ˆå‡æ–¹è¯¯å·®ï¼‰è®¡ç®—ä¿¡å·å¼ºåº¦ä¸å™ªå£°å¼ºåº¦çš„æ¯”å€¼

è¯¯å·®è¶Šå°ï¼ŒPSNR è¶Šé«˜ï¼Œä»£è¡¨å‹ç¼©å›¾åƒè¶Šæ¥è¿‘åŸå›¾

ç®€å•å¿«é€Ÿï¼Œå†å²æœ€æ‚ ä¹…

æ— æ³•åæ˜ ç»“æ„ã€æ„ŸçŸ¥å·®å¼‚ï¼›å¯¹è§†è§‰ä¸æ•æ„Ÿ

**SSIM**

Structural Similarity Index ç»“æ„ç›¸ä¼¼æ€§

æ¨¡æ‹Ÿäººçœ¼å¯¹äº®åº¦ã€å¯¹æ¯”åº¦ã€ç»“æ„çš„æ„ŸçŸ¥

æ›´ç¬¦åˆäººçœ¼æ„ŸçŸ¥çš„ç»“æ„å¯¹æ¯”

è€ƒè™‘ç»“æ„ç›¸ä¼¼æ€§ï¼Œè§†è§‰å‹å¥½

å¯¹å¤šå°ºåº¦ã€å¤§èŒƒå›´å¤±çœŸä¸æ•æ„Ÿ

**MS-SSIM**

Multi-Scale SSIM å¤šå°ºåº¦ç»“æ„ç›¸ä¼¼æ€§

å¤šåˆ†è¾¨ç‡ä¸‹è®¡ç®— SSIMï¼Œå¢å¼ºå…¨å±€æ„ŸçŸ¥

æ¯” SSIM æ›´ç¨³å®šåœ°åæ˜ æ„ŸçŸ¥è´¨é‡

æ¯” SSIM æ›´æ¥è¿‘äººç±»ä¸»è§‚è¯„åˆ†

è®¡ç®—å¤æ‚åº¦æ¯” SSIM ç¨é«˜

**LPIPS**

Learned Perceptual Image Patch Similarity æ„ŸçŸ¥å›¾åƒå·®å¼‚

åŸºäºæ·±åº¦å­¦ä¹ ï¼Œä½¿ç”¨ç‰¹å¾ç©ºé—´è·ç¦»è®¡ç®—æ„ŸçŸ¥ç›¸ä¼¼åº¦

è¶Šå°è¶Šæ¥è¿‘ï¼Œè¶Šå¤§è¶Šä¸ç›¸ä¼¼

æœ€è´´è¿‘äººçœ¼æ„ŸçŸ¥ï¼Œå¤„ç†æ¨¡ç³Šã€ç»“æ„å˜å½¢æ•ˆæœå¥½

ä¾èµ–æ¨¡å‹ï¼Œé€Ÿåº¦æ…¢

å®é™…æ“ä½œï¼ŒåŒæ—¶ä½¿ç”¨ MS-SSIM å’Œ LPIPS æ¥è¯„ä»·å›¾åƒè´¨é‡ï¼Œåˆ†åˆ«è®¾ç½®é˜ˆå€¼ä¸º`0.98`å’Œ`0.02`ï¼Œé€šè¿‡æœç´¢`quality`çš„å€¼æ¥è·å–æœ€ä½³è®¾ç½®ã€‚æˆ‘æµ‹è¯•äº†åšå®¢ä¸­çš„ 20 å¼ å›¾ç‰‡ï¼Œå‰ 6 å¼ ä¸ºæ‰‹æœºæ‹æ‘„çš„ç…§ç‰‡ï¼Œå 14 å¼ åˆ™åŒ…å«äº†ç”µå­ä¹¦æ’å›¾ã€å±å¹•æˆªå›¾ã€çº¿ç¨¿å›¾ã€PPT åˆæˆå›¾ç­‰ã€‚ä»¥`quality=80`ä½œä¸ºå‚è€ƒå€¼ï¼Œç”±ç»“æœå¯ä»¥çœ‹åˆ°ï¼Œè‡ªé€‚åº”çš„`quality`é€‰æ‹©èŒƒå›´å¾ˆå¤§ï¼Œ10-86 éƒ½æœ‰ï¼›20 å¼ å›¾çš„å¹³å‡ç»“æœï¼Œè‡ªé€‚åº”æ–¹æ³•èŠ‚çœç©ºé—´ 84.81%ï¼Œå›ºå®šè´¨é‡ï¼ˆ80ï¼‰åˆ™ä¸º 81.69%ã€‚è™½ç„¶æ€»çš„æ¥çœ‹ç©ºé—´èŠ‚çœå·®è·ä¸å¤§ï¼Œä½†å¯ä»¥åˆæ­¥çœ‹å‡ºï¼Œã€Œç…§ç‰‡ã€æ‰€éœ€çš„`quality`è¦æ¯”æˆªå›¾ã€çº¿ç¨¿è¦å¤§ä¸€äº›ï¼Œä¸”åˆ†è¾¨ç‡è¶Šå¤§çš„å›¾ï¼Œ`quality`ä¹Ÿä¼šåå¤§ï¼›è€Œç”»é¢å¹²å‡€çš„å›¾`quality`å¯ä»¥å¾ˆå°ï¼Œæ¯”å¦‚`7.png`ï¼Œ`9.png`ï¼Œ`10.png`ï¼Œ`19.jpg`ã€‚

æ–‡ä»¶å

åŸå§‹

è‡ªé€‚åº”

Q=80

è´¨é‡ Q

MS-A

LPIPS-A

MS-Q80

LPIPS-Q80

1.jpg

425.7KB

150.5KB

185.7KB

71

0.9924

0.0191

0.9944

0.0104

2.jpg

2175.4KB

163.7KB

235.5KB

63

0.9898

0.0199

0.9926

0.0120

3.jpg

559.1KB

206.1KB

159.9KB

85

0.9913

0.0191

0.9885

0.0325

4.jpg

537.9KB

177.9KB

146.7KB

84

0.9907

0.0193

0.9889

0.0248

5.jpg

660.3KB

336.2KB

291.1KB

83

0.9912

0.0177

0.9884

0.0276

6.png

1183.5KB

67.5KB

50.9KB

86

0.9915

0.0197

0.9882

0.0309

7.png

288.1KB

61.5KB

146.5KB

12

0.9859

0.0186

0.9962

0.0041

8.jpg

232.1KB

37.9KB

55.2KB

56

0.9892

0.0200

0.9945

0.0074

9.png

101.8KB

12.0KB

26.0KB

13

0.9888

0.0185

0.9976

0.0030

10.png

200.6KB

16.7KB

41.8KB

12

0.9893

0.0189

0.9987

0.0020

11.png

159.8KB

14.8KB

26.1KB

33

0.9881

0.0197

0.9958

0.0053

12.png

402.3KB

163.4KB

147.2KB

83

0.9803

0.0072

0.9792

0.0097

13.png

128.2KB

8.9KB

16.4KB

25

0.9852

0.0179

0.9901

0.0072

14.png

925.1KB

83.1KB

155.3KB

31

0.9844

0.0197

0.9926

0.0086

15.png

642.8KB

61.8KB

114.4KB

40

0.9854

0.0198

0.9924

0.0085

16.png

749.8KB

37.4KB

38.9KB

79

0.9955

0.0188

0.9957

0.0166

17.png

880.0KB

25.1KB

38.9KB

52

0.9905

0.0193

0.9940

0.0076

18.png

523.0KB

35.1KB

41.9KB

76

0.9916

0.0182

0.9933

0.0145

19.jpg

444.8KB

53.8KB

126.7KB

10

0.9911

0.0157

0.9995

0.0009

20.jpg

331.1KB

41.4KB

69.6KB

16

0.9933

0.0189

0.9983

0.0037

**æ€»å’Œ**

**11551.3KB**

**1754.8KB**

**2114.6KB**

Â 

Â 

Â 

Â 

Â 

### ä¸åœ¨çº¿å·¥å…·çš„å¯¹æ¯”

æœ‰å¾ˆå¤šåœ¨çº¿å›¾åƒå‹ç¼©å·¥å…·æˆ– CDN æä¾›äº†å›¾åƒä¼˜åŒ–æœåŠ¡ï¼Œæ¥è¯•è¯•æˆ‘ä»¬çš„å‹ç¼©æ•ˆæœä¸ä¹‹ç›¸æ¯”å¦‚ä½•5ã€‚[WebP Cloud Services](https://webp.se/)å’Œ [TinyPNG](https://tinypng.com/)çš„å‹ç¼©ç‡é€‰æ‹©æœ‰è¾ƒå¤§çš„å·®åˆ«ï¼ŒWebP Cloud Services çš„è´¨é‡è¾ƒå¥½ï¼ŒTinyPNG çš„å‹ç¼©ç‡è¾ƒå¤§ã€‚æˆ‘ä»¬æ— æ³•ç²¾ç»†åœ°è°ƒè¯•è¿™äº›åœ¨çº¿å·¥å…·çš„å‹ç¼©å‚æ•°ï¼Œæœ¬åœ°çš„çµæ´»æ€§åˆ™è¾ƒé«˜ï¼Œé€šè¿‡å‚æ•°çš„è°ƒè¯•å¯ä»¥è¾¾åˆ°åŒæ ·çš„æ•ˆæœã€‚æœ€ç»ˆï¼Œæ ¹æ®æˆ‘ä»¬è®¾å®šçš„ MS-SSIM å’Œ LPIPS é˜ˆå€¼ï¼Œä½¿ç”¨`quality=85`è·å¾—äº† 42.5KB å¤§å°çš„æœ€ç»ˆæ–‡ä»¶ï¼Œè€ŒåŸæ–‡ä»¶å¤§å° 599.0KBã€‚

Â 

quality=93

WebP Cloud

quality=75

TinyPNG

quality=85

SIZE /KB

75.8

75.7

28.4

28.6

42.5

PSNR /dB

42.82

41.83

37.89

35.27

40.10

SSIM

0.9846

0.9782

0.9598

0.9595

0.9716

MS-SSIM

0.9969

0.9954

0.9903

0.9890

0.9937

VIF

0.8806

0.8513

0.7720

0.7661

0.8279

LPIPS

0.0055

0.0074

0.0263

0.0260

0.0198

é“¾æ¥è½¬æ¢ä¸æ–‡ä»¶ä¸Šä¼ 
---------

æŠŠå›¾ç‰‡çš„å‹ç¼©é—®é¢˜è§£å†³åï¼Œå‰©ä¸‹çš„å°±å¾ˆç®€å•äº†ï¼š

-   ä½¿ç”¨æ­£åˆ™è¡¨è¾¾å¼åŒ¹é… markdown æ–‡ä»¶ä¸­çš„é“¾æ¥ï¼ˆWiKI å’Œ Markdown é£æ ¼ï¼‰ï¼›
-   åˆ†ç±»ï¼Œåˆ¤æ–­ç±»å‹ï¼šé™æ€/åŠ¨æ€å›¾ç‰‡ã€è§†é¢‘ã€æœ¬åœ°/å¤–é“¾/ç«™å†…é“¾æ¥ï¼›
-   æ ¹æ®åˆ†ç±»è¿›è¡Œé™é‡‡æ ·ã€å‹ç¼©ï¼Œç§»é™¤å…ƒæ•°æ®ï¼›
-   ç”Ÿæˆå”¯ä¸€æ–‡ä»¶åï¼Œä¿å­˜è‡³æœ¬åœ°ï¼Œå°† markdown æ–‡ä»¶ä¸­çš„é“¾æ¥æ›¿æ¢ä¸ºæ ‡å‡†å›¾åƒå¼•ç”¨æ ¼å¼ï¼›
-   å°†å‹ç¼©å‚æ•°ã€æ–‡ä»¶åæ˜ å°„ä¿å­˜è‡³æ•°æ®åº“ã€‚

![](https://cdnfile.sspai.com/2025/07/27/42fa1fd997f97bf8924a63386881cbd0.png?imageView2/2/w/1120/q/90/interlace/1/ignore-error/1/format/webp)

ä»¥ä¸‹æ˜¯å‡ ç§æ­£åˆ™åŒ¹é…çš„æ ·å¼å’Œè½¬æ¢åçš„æ ·å¼ï¼š

```
![](image_filename | url)
[](image_filename | url)
![[image_filename | url]]
[[image_filename | url]]
>>>>>Transfer to>>>>>
![](https://img.osnsyc.top/XXXXXX.webp)
```

```
banner: [[image_filename | url]]
>>>>>Transfer to>>>>>
banner: https://img.osnsyc.top/XXXXXX.webp
```

```
{{< dbcard
    ...
    cover=[[Pasted image 2025.png]]
    ...
>}}
>>>>>Transfer to>>>>>
{{< dbcard
    ...
    cover="https://img.osnsyc.top/XXXXXX.webp"
    ...
>}}
```

```
![](video_filename | url)
[](video_filename | url)
![[video_filename | url]]
[[video_filename | url]]
>>>>>Transfer to>>>>>
{{< video src="https://img.osnsyc.top/XXXXXX.mp4" >}}
```

é“¾æ¥æ›¿æ¢å®Œæˆåç”Ÿæˆä¸€ä¸ªæ–°çš„ markdown æ–‡ä»¶ï¼Œå¯ä»¥ç”± hugo æ­£ç¡®åœ°ç¼–è¯‘ã€‚ç”Ÿæˆçš„é™„ä»¶ä¹Ÿå¯ä»¥ç”¨è„šæœ¬ä¸€é”®ä¸Šä¼ è‡³ Cloudfalre R2 å­˜å‚¨æ¡¶ã€‚æœ€ç»ˆï¼Œä¸€ä¸ªå®Œæ•´çš„ Obsidian è‡³ Hugo çš„å·¥ä½œæµåªéœ€è¦ä¸¤è¡Œå‘½ä»¤å³å¯å®Œæˆã€‚ç›¸å…³ä»£ç å¯ä»¥ç§»æ­¥[GitHub - osnsyc/obsidian-to-hugo-toolbox](https://github.com/osnsyc/obsidian-to-hugo-toolbox)æŸ¥çœ‹ã€‚

```
# æ ¼å¼åŒ– Markdown æ–‡ä»¶
python md_publisher.py -f test_post.md
# ä¸Šä¼ è‡³ R2
python r2_uploader.py -f <path_to_file_or_folder>
```

![](https://cdnfile.sspai.com/2025/07/28/b74e46debd01f027605b1f3cff8df3f5.png?imageView2/2/w/1120/q/90/interlace/1/ignore-error/1/format/webp)

å·¦: Obsidianï¼Œå³:é™æ€åšå®¢

æˆ‘åœ¨å»å¹´å»ºç«‹åšå®¢ä¹‹åˆ[Hugo åšå®¢å¿«é€Ÿæ­å»ºå°è®°](https://osnsyc.top/posts/hugo-blog-building/)å†™é“ï¼š

> æˆ‘å†™äº† 9 ç¯‡åšæ–‡ï¼Œå¹³å‡ç¯‡å¹… 4570 å­—ï¼Œé™„ä»¶ä¸ç®—å°‘ï¼ŒR2 ç©ºé—´ç”¨äº† 160MBï¼Œç®—ä¸‹æ¥ï¼Œå…è´¹ç©ºé—´å¤Ÿå†™ 562 ç¯‡é•¿æ–‡äº†ã€‚

ç°åœ¨çœ‹æ¥ï¼Œåšå®¢å…±æœ‰æ–‡ç«  24 ç¯‡ï¼Œå„ç±»å›¾åƒéƒ½æœ‰6ï¼Œä¼˜åŒ–åçš„é™„ä»¶æ€»å¤§å°ä¸º 113.9MBï¼Œæ‰€ä»¥ç°åœ¨ç®—ä¸‹æ¥ï¼ŒCloudFlare R2 å…è´¹ç©ºé—´å¤Ÿå†™ 2107 ç¯‡é•¿æ–‡äº†ã€‚

Â 

æ•°é‡

ä½“ç§¯/MB

å¹³å‡ä½“ç§¯

é™æ€å›¾ç‰‡

258

23.1

0.09MB

åŠ¨æ€å›¾ç‰‡

29

87.9

3.03MB

è§†é¢‘

1

3.9

3.9MB

æ€»å’Œ

288

113.9

0.40MB

**ç›¸å…³é˜…è¯»**

-   [How to optimize images for website performance: best image sizes, compression, tools & testing](https://www.foregroundweb.com/image-size/)
-   [web.dev, Responsive Images](https://web.dev/articles/responsive-images?hl=zh-cn)
-   [Hugo åšå®¢å¿«é€Ÿæ­å»ºå°è®°](https://osnsyc.top/hugo-blog-building)

\> å…³æ³¨Â [å°‘æ•°æ´¾å°çº¢ä¹¦](https://www.xiaohongshu.com/user/profile/63f5d65d000000001001d8d4)ï¼Œæ„Ÿå—ç²¾å½©æ•°å­—ç”Ÿæ´» ğŸƒ

\> å®ç”¨ã€å¥½ç”¨çš„ [æ­£ç‰ˆè½¯ä»¶](https://sspai.com/mall)ï¼Œå°‘æ•°æ´¾ä¸ºä½ å‘ˆç° ğŸš€
